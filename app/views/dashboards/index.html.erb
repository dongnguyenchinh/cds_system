<script src="https://d3js.org/d3.v5.min.js"></script>
<%= stylesheet_link_tag 'dashboards', media: 'all', 'data-turbolinks-track': 'reload' %>
<%= stylesheet_link_tag 'jquery.dataTables.min', media: 'all', 'data-turbolinks-track': 'reload' %>
<div class="header-panel">
  <div class="welcome">Welcome to Competency Development System</div>
  <% if @can_view_chart %>
    <div id="filter_dashboard" class="btn-filter-dashboard">
      <i class="fas fa-chevron-down" style="color: black"></i> Filter
    </div>
  <% end%>
</div>
<% if @can_view_chart %>
  <div class="col-10 filter-dashboard">
    <%= render"filter_review" %>
  </div>
<% end %>
<div class="dashboard">
  <% if @can_view_chart %>
    <div class="row1">
      <div id="chart_role" class="col bb">
        <div class="col title">
          Number of Employee(s) by Role
        </div>
      </div>
      <div id="chart_gender" class="col aa">
        <div class="col title">Number of Employee(s) by Gender</div>
      </div>
      <div class="w-100"></div>
      <div id="chart_title" class="col dd">
        <div class="col title">
          Number of Employee (s) by Title
        </div>
      </div>
      <div id="chart_seniority" class="col cc">
        <div class="col title">
          Number of Employee(s) by Seniority
        </div>
      </div>
    </div>
    <br>
  <% end %>
  <% if @can_view_career %>
    <div class="row2" id="my_career">
      <div class="title-header-up">My Career Path</div>
      <div id="chart_my_career" style="width: 100%; height: 100%">
      </div>
    </div>
  <% end %>
  <% if @can_view_chart %>
    <div class="title-table">
      <div class="title-header-up">Promotion in the Last Period</div>
      <div class="icon">
        <%= link_to 'View all CDSs/CDPs', cds_review_forms_path, class:"reject-assessment", title:"View all CDSs/CDPs" %>&nbsp;
        <span>Export</span>&nbsp;
        <i class="fa fa-file-excel-o icon" id="export_excel_up_title" title="Export Excel" style="color: green"></i>&nbsp;
        <%# <i class="fa fa-file-pdf-o" id="export_pdf_up_title" title="Export PDF" style="color: #a96f6f" aria-hidden="true"></i> %>
      </div>
    </div>
    <div id="layout_table_up">
      <table id="table_up" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th class="th-sm number" rowspan="2" >No.</th>
            <th class="th-sm name" rowspan="2" data-field="full_name">Full Name</th>
            <th class="th-sm email" rowspan="2" data-field="email">Email</th>
            <th class="th-sm role" rowspan="2" data-field="role">Role</th>
            <th class="th-sm" colspan="3">Previous Assessment</th>
            <th class="th-sm" colspan="3">Current Assessment</th>
            <th class="th-sm action" rowspan="2">Action</th>
          </tr>
          <tr>
            <th class="th-sm title-h" data-field="old_title">Title</th>
            <th class="th-sm rank" data-field="old_rank">Rank</th>
            <th class="th-sm level" data-field="old_level">Level</th>
            <th class="th-sm title-h" data-field="title">Title</th>
            <th class="th-sm rank" data-field="rank">Rank</th>
            <th class="th-sm level" data-field="level">Level</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
    <br>
    <div class="title-table">
      <div class="title-header-up">Demotion in the Last Period</div>
      <div class="icon">
        <%= link_to 'View all CDSs/CDPs', cds_review_forms_path, class:"reject-assessment", title:"View all CDSs/CDPs" %>&nbsp;
        <span>Export</span>&nbsp;
        <i class="fa fa-file-excel-o icon" id="export_excel_down_title" title="Export Excel" style="color: green"></i>&nbsp;
        <%# <i class="fa fa-file-pdf-o" id="export_pdf_down_title" title="Export PDF" style="color: #a96f6f" aria-hidden="true"></i> %>
      </div>
    </div>
    <div id="layout_table_down">
      <table id="table_down" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th class="th-sm number" rowspan="2" >No.</th>
            <th class="th-sm name" rowspan="2" data-field="full_name">Full Name</th>
            <th class="th-sm email" rowspan="2" data-field="email">Email</th>
            <th class="th-sm role" rowspan="2" data-field="role">Role</th>
            <th class="th-sm" colspan="3">Previous Assessment</th>
            <th class="th-sm" colspan="3">Current Assessment</th>
            <th class="th-sm action" rowspan="2">Action</th>
          </tr>
          <tr>
            <th class="th-sm title-h" data-field="old_title">Title</th>
            <th class="th-sm rank" data-field="old_rank">Rank</th>
            <th class="th-sm level" data-field="old_level">Level</th>
            <th class="th-sm title-h" data-field="title">Title</th>
            <th class="th-sm rank" data-field="rank">Rank</th>
            <th class="th-sm level" data-field="level">Level</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
    <br>
    <div class="title-table">
      <div class="title-header-keep">No Change Title in the Last Period</div>
      <div class="icon">
        <span>Keep in</span>&nbsp;
        <select class="filter" id="select_type_keep">
          <option value='0' selected>At least 1 latest period</option>
          <option value='1'>1 latest period</option>
          <option value='2'>2 latest period</option>
          <option value='3'>More than 2 latest period</option>
        </select>&nbsp;
        <%= link_to 'View all CDSs/CDPs', cds_review_forms_path, class:"reject-assessment", title:"View all CDSs/CDPs" %>&nbsp;
        <span>Export</span>&nbsp;
        <i class="fa fa-file-excel-o icon" id="export_excel_keep_title" title="Export Excel" style="color: green"></i>&nbsp;
        <%# <i class="fa fa-file-pdf-o" id="export_pdf_keep_title" title="Export PDF" style="color: #a96f6f" aria-hidden="true"></i> %>
      </div>
    </div>
    <div id="layout_table_keep">
      <table id="table_keep" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th class="th-sm number">No.</th>
            <th class="th-sm name">Full Name</th>
            <th class="th-sm email">Email</th>
            <th class="th-sm role">Role</th>
            <th class="th-sm title-h">Title</th>
            <th class="th-sm rank">Rank</th>
            <th class="th-sm level">Level</th>
            <th class="th-sm period-keep">Period Keep</th>
            <th class="th-sm action">Action</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  <% end %>
  <% if !@can_view_chart && @can_view_career %>
    <div class="viewport-staff">
      <div class='baseline-cds'>
        <div class="title-header-up">My Latest Baseline CDS</div>
        <table id="table_baseline" class="table table-striped table-bordered table-sm" cellspacing="0">
          <thead>
            <tr>
              <th class="th-sm first-column"></th>
              <th class="th-sm">Previous</th>
              <th class="th-sm">Current</th>
              <th class="th-sm">Plan</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="th-sm type-text first-column">Title</td>
              <td id="title_previous" class="th-sm type-icon">N/A</td>
              <td id="title_current" class="th-sm type-icon">N/A</td>
              <td id="title_plan" class="th-sm type-icon">N/A</td>
            </tr>
            <tr>
              <td class="th-sm type-text first-column">Rank</td>
              <td id="rank_previous" class="th-sm type-icon">N/A</td>
              <td id="rank_current" class="th-sm type-icon">N/A</td>
              <td id="rank_plan" class="th-sm type-icon">N/A</td>
            </tr>
            <tr>
              <td class="th-sm type-text first-column">Level</td>
              <td id="level_previous" class="th-sm type-icon">N/A</td>
              <td id="level_current" class="th-sm type-icon">N/A</td>
              <td id="level_plan" class="th-sm type-icon">N/A</td>
            </tr>
          </tbody>
        </table>
      </div>
      <%# <div class='cds-cdp-suggestion'>
        <div class="title-header-up">CDS&CDP Suggestion</div>
      </div> %>
    </div>
  <% end %>
</div>
<div class="alert-message">
  <div id="alert-danger" class="alert alert-danger" data-alert="alert"><span id="content-alert-fail"></span></div>
  <div id="alert-warning" class="alert alert-warning" data-alert="alert"><span id="content-alert-warning"></span></div>
</div>
<script>
  var is_staff =  <%= !@can_view_chart && @can_view_career %>;
  var is_change_company = false;
  var curr_company_ids = [];
</script>
<script type="text/javascript" src="https://www.jqueryscript.net/demo/Bootstrap-4-Multi-Select-BsMultiSelect/dist/js/BsMultiSelect.js"></script>
<script src="https://unpkg.com/arraygeous@0.1.4/build/arraygeous.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/0.10.0/lodash.min.js"></script>
<%= javascript_include_tag 'moment.min', 'data-turbolinks-track': 'reload' %>
<%= javascript_include_tag 'bootbox.all', 'data-turbolinks-track': 'reload' %>
<%= javascript_include_tag 'pyramid_chart', 'data-turbolinks-track': 'reload' %>
<%= javascript_include_tag 'pie_chart', 'data-turbolinks-track': 'reload' %>
<%= javascript_include_tag 'line_chart', 'data-turbolinks-track': 'reload' %>
<%= javascript_include_tag 'data_table_dashboards', 'data-turbolinks-track': 'reload' %>
<%= javascript_include_tag 'dashboards_export', 'data-turbolinks-track': 'reload' %>
<%= javascript_include_tag 'dashboards', 'data-turbolinks-track': 'reload' %>
